"use strict";(self["webpackChunkgame_stats_vue"]=self["webpackChunkgame_stats_vue"]||[]).push([[691],{8691:(e,a,l)=>{l.r(a),l.d(a,{default:()=>$});var t=l(3673),o=l(2323);const n=e=>((0,t.dD)("data-v-00a75491"),e=e(),(0,t.Cn)(),e),i={key:0,class:"column q-pa-md q-gutter-md"},s={class:"cursor-pointer q-hoverable"},r=n((()=>(0,t._)("span",{class:"q-focus-helper"},null,-1))),u={class:"text-h6"},d={class:"text-subtitle2"},c={class:"bg-secondary"},p=(0,t.Uk)("Delete");function m(e,a,l,n,m,g){const f=(0,t.up)("q-card-section"),v=(0,t.up)("q-badge"),y=(0,t.up)("router-link"),w=(0,t.up)("q-separator"),_=(0,t.up)("q-btn"),k=(0,t.up)("q-card-actions"),q=(0,t.up)("q-card"),h=(0,t.up)("q-page-sticky"),b=(0,t.up)("q-page"),C=(0,t.Q2)("ripple");return(0,t.wg)(),(0,t.j4)(b,{class:"row items-center justify-evenly"},{default:(0,t.w5)((()=>[e.games?((0,t.wg)(),(0,t.iD)("div",i,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.games,(({id:a,name:l,description:n,players:i})=>((0,t.wg)(),(0,t.j4)(q,{key:a,class:"text-white bg-secondary",style:(0,o.j5)(e.$q.screen.xs?"width: 320px;":"width: 640px;")},{default:(0,t.w5)((()=>[(0,t.wy)((0,t._)("div",s,[r,(0,t.Wm)(y,{class:"router-link",to:`/${a}/`},{default:(0,t.w5)((()=>[(0,t.Wm)(f,null,{default:(0,t.w5)((()=>[(0,t._)("div",u,(0,o.zw)(l),1),(0,t._)("div",d,(0,o.zw)(n),1)])),_:2},1024),i?((0,t.wg)(),(0,t.j4)(f,{key:0,class:"row q-gutter-xs"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(i,(({id:e,name:a})=>((0,t.wg)(),(0,t.iD)(t.HY,{key:e},[e?((0,t.wg)(),(0,t.j4)(v,{key:0,color:"dark",label:a},null,8,["label"])):(0,t.kq)("",!0)],64)))),128))])),_:2},1024)):(0,t.kq)("",!0)])),_:2},1032,["to"])],512),[[C]]),(0,t._)("div",c,[(0,t.Wm)(w,{dark:""}),(0,t.Wm)(k,{align:"right"},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{flat:"",icon:"delete",onClick:t=>e.deleteDialog(a,l)},{default:(0,t.w5)((()=>[p])),_:2},1032,["onClick"])])),_:2},1024)])])),_:2},1032,["style"])))),128))])):(0,t.kq)("",!0),(0,t.Wm)(h,{position:"bottom-right",offset:[24,24]},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{fab:"",icon:"add",color:"accent",onClick:e.openNewGameDialog},null,8,["onClick"])])),_:1})])),_:1})}var g=l(1959),f=l(1768),v=l(8825);const y={class:"text-h6"};function w(e,a,l,n,i,s){const r=(0,t.up)("q-card-section"),u=(0,t.up)("q-input"),d=(0,t.up)("q-btn"),c=(0,t.up)("q-chip"),p=(0,t.up)("q-card-actions"),m=(0,t.up)("q-card"),g=(0,t.up)("q-dialog"),f=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(g,{ref:"dialogRef",onHide:e.onDialogHide},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{class:"q-dialog-plugin"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t._)("div",y,(0,o.zw)(e.title),1)])),_:1}),(0,t.Wm)(r,{class:"q-pt-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{label:"Name","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type something"],modelValue:e.game.name,"onUpdate:modelValue":a[0]||(a[0]=a=>e.game.name=a),autofocus:""},null,8,["rules","modelValue"])])),_:1}),(0,t.Wm)(r,{class:"q-pt-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{label:"Description",modelValue:e.game.description,"onUpdate:modelValue":a[1]||(a[1]=a=>e.game.description=a)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(r,{class:"q-pt-none"},{default:(0,t.w5)((()=>[(0,t._)("form",null,[(0,t.Wm)(u,{modelValue:e.player,"onUpdate:modelValue":a[3]||(a[3]=a=>e.player=a),label:"Player Name",rules:[a=>!e.foundPlayer(a)||"This player already exist"]},{append:(0,t.w5)((()=>[(0,t.Wm)(d,{type:"submit",round:"",flat:"",icon:"add",onClick:a[2]||(a[2]=a=>e.addPlayer(e.player))})])),_:1},8,["modelValue","rules"])])])),_:1}),(0,t.Wm)(r,{class:"q-pt-none q-gutter-xs"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.game.players,(({name:a,id:l})=>((0,t.wg)(),(0,t.j4)(c,{key:l,size:"md",removable:"",label:a,onRemove:l=>e.delPlayer(a),color:"secondary","text-color":"white"},null,8,["label","onRemove"])))),128))])),_:1}),(0,t.Wm)(p,{align:"right",class:"text-primary"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(d,{flat:"",label:"Cancel"},null,512),[[f]]),(0,t.Wm)(d,{type:"submit",flat:"",label:"Submit",onClick:e.onOKClick},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["onHide"])}var _=l(8777);const k=(0,t.aZ)({name:"NewGameDialog",emits:[..._.Z.emits],setup(){const{dialogRef:e,onDialogHide:a,onDialogOK:l,onDialogCancel:t}=(0,_.Z)(),o="Create a new game",n=(0,g.iH)(""),i=(0,g.iH)({name:"",players:[]});function s(e){return i.value.players.some((a=>a.name===e))}function r(e){s(e)||""===e||(i.value.players.push({name:e}),n.value="")}function u(e){i.value.players=i.value.players.filter((a=>a.name!==e))}return{title:o,game:i,player:n,dialogRef:e,onDialogHide:a,addPlayer:r,delPlayer:u,foundPlayer:s,onOKClick(){i.value.name.length>0&&l(i.value)},onCancelClick:t}}});var q=l(4260),h=l(5926),b=l(151),C=l(5589),Z=l(1206),D=l(8240),W=l(7030),Q=l(9367),x=l(677),H=l(7518),P=l.n(H);const V=(0,q.Z)(k,[["render",w]]),j=V;P()(k,"components",{QDialog:h.Z,QCard:b.Z,QCardSection:C.Z,QInput:Z.Z,QBtn:D.Z,QChip:W.Z,QCardActions:Q.Z}),P()(k,"directives",{ClosePopup:x.Z});const G=(0,t.aZ)({name:"PageIndex",setup(){const e=(0,v.Z)(),a=(0,g.iH)();function l(e){a.value&&(a.value=a.value.filter((a=>a.id!==e)))}function t(){f.api.get("/games/").then((e=>{a.value=e.data})).catch((a=>{var l,t;let o=a.message;(null===(l=a.response)||void 0===l?void 0:l.data)&&(o=null===(t=a.response)||void 0===t?void 0:t.data),e.notify({color:"negative",position:"top",message:o,icon:"report_problem"})}))}function o(a){f.api["delete"](`/games/${a}/`).catch((a=>{var l,o;let n=a.message;(null===(l=a.response)||void 0===l?void 0:l.data)&&(n=null===(o=a.response)||void 0===o?void 0:o.data),e.notify({color:"negative",position:"top",message:n,icon:"report_problem"}),t()}))}function n(a){f.api.post("/games/",a).then((()=>{t()})).catch((a=>{e.notify({color:"negative",position:"top",message:`Error create game: ${a.message}`,icon:"report_problem"})}))}function i(){e.dialog({component:j}).onOk((e=>{n(e)}))}function s(a,t){e.dialog({title:"Delete Game",message:`Are you sure to delete '${t}' game?`,cancel:!0,persistent:!0}).onOk((()=>{l(a),o(a)}))}return{apiFetchGames:t,apiCreateGame:n,apiDeleteGame:o,openNewGameDialog:i,deleteDialog:s,games:a}},created(){this.apiFetchGames()}});var K=l(4379),R=l(9721),z=l(5869),N=l(1007),O=l(6489);const S=(0,q.Z)(G,[["render",m],["__scopeId","data-v-00a75491"]]),$=S;P()(G,"components",{QPage:K.Z,QCard:b.Z,QCardSection:C.Z,QBadge:R.Z,QSeparator:z.Z,QCardActions:Q.Z,QBtn:D.Z,QPageSticky:N.Z}),P()(G,"directives",{Ripple:O.Z})}}]);